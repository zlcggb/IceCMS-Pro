require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subPage/commen/appdetails"],{"1f0c":function(o,n,t){"use strict";(function(o){var e=t("47a9");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e(t("c8ae")),u={data:function(){return{placeholder:"请输入评论",showdown:!1,sleep:0,downloadTask:null,downUrls:"",show:!1,topBar:"one",cid:"",name:"",postlunbo:"",thumb:"",title:"",tag:[],down:"",time:"",content:"",showshare:"",commentsNum:"0",comments:[],commentText:"",showCmt:!1,yonghuming:"",qqnumber:"",nameimg:"",downurl:"",freedownurl:"",showlist:""}},components:{MDParserHighlight:function(){Promise.all([t.e("common/vendor"),t.e("subPage/common/vendor"),t.e("subPage/commen/cmder-MDParserHighlight/index")]).then(function(){return resolve(t("3f84"))}.bind(null,t)).catch(t.oe)}},onLoad:function(o){this.topMenu(),this.id=o.id,this.name=o.name,this.getCategoriesList(),this.getComments()},onPullDownRefresh:function(){this.getCategoriesList(),setTimeout((function(){o.showToast({title:"刷新成功"}),o.stopPullDownRefresh()}),1e3)},onPageScroll:function(o){o.scrollTop>120?this.topBar="tow":this.topBar="one"},methods:{downss:function(){var n=this,t=o.getStorageSync("Token");console.log(t),null!==t&&""!==t?o.request({url:"http://易如意后台域名/api.php?act=get_info&app=10000&token="+t,method:"GET",data:{},success:function(e){console.log(e.data.msg.vip);var s=new Date;if(e.data.msg.vip-s>0){n.showdown=!0;var u=n.downurl;-1!=u.indexOf("lanzou")?o.request({url:"http://蓝奏云解析域名/lanzou.php?url="+n.downurl,method:"GET",success:function(o){n.downUrls=o.data.download,n.downapk()}}):-1!=u.indexOf(".apk")?(n.showdown=!0,n.downUrls=n.downurl,n.downapk()):o.showToast({title:"不支持此链接下载方式！！"})}else if("999999999"==e.data.msg.vip){n.showdown=!0;u=n.downurl;-1!=u.indexOf("lanzou")?o.request({url:"http://蓝奏云解析域名/lanzou.php?url="+n.downurl,method:"GET",success:function(o){n.downUrls=o.data.download,n.downapk()}}):-1!=u.indexOf(".apk")?(n.showdown=!0,n.downUrls=n.downurl,n.downapk()):o.showToast({title:"不支持此链接下载方式！！"})}else o.request({url:"http://易如意后台域名/api.php?act=get_fen&app=10000&token="+t+"&fid=4",method:"GET",data:{},success:function(t){if(console.log(t.data),"200"==t.data.code){o.showToast({title:"扣除10积分，开始下载！",icon:"none"}),n.showdown=!0;var e=n.downurl;-1!=e.indexOf("lanzou")?o.request({url:"http://蓝奏云解析域名/lanzou.php?url="+n.downurl,method:"GET",success:function(o){n.downUrls=o.data.download,console.log(n.downUrls),n.downapk()}}):-1!=e.indexOf(".apk")?(n.showdown=!0,n.downUrls=n.downurl,console.log(n.downUrls),n.downapk()):o.showToast({title:"不支持此链接下载方式！！"})}else o.showToast({title:"积分不足",icon:"error"}),o.showModal({title:"友情提示",content:"您积分不足，是否前去购买积分？或者购买会员即可免积分下载？",success:function(n){n.confirm?(console.log("用户点击确定"),o.switchTab({url:"../my/vip/shop"})):n.cancel&&console.log("用户点击取消")}})}})}}):o.showModal({title:"友情提示",content:"您未登录软件，登录后即可享受软件下载功能，是否前去登录？",success:function(n){n.confirm?(console.log("用户点击确定"),o.navigateTo({url:"../my/account/login"})):n.cancel&&console.log("用户点击取消")}})},downapk:function(){var n=this;this.downloadTask=o.downloadFile({url:this.downUrls,success:function(t){console.log(t),200==t.statusCode&&o.showModal({title:"",content:"下载完成，确定现在安装吗？",confirmText:"安装",confirmColor:"#EE8F57",success:function(o){o.confirm&&(console.log("开始安装"),plus.runtime.install(t.tempFilePath,{},(function(o){console.log(o,"**************************"),n.$emit("updateSucc"),plus.runtime.restart()}),(function(o){console.log(o),n.$emit("updateErro")})))}})},fail:function(o){console.log(o)}}),this.downloadTask.onProgressUpdate((function(o){n.sleep=o.progress,100==o.progress&&(n.showdown=!1,n.$emit("downOver"))}))},getCategoriesList:function(){var n=this,t=this.id;o.request({url:s.default.GetPostsbyID(t),success:function(o){console.log(o);var t=o.data;n.title=t.title,n.content=t.content,n.thumb=t.thumb,n.postlunbo=t.postlunbo[0].str_value,n.time=t.year+"年"+t.month+"月"+t.day+"日",n.name=t.name.screenName,n.down=t.views[0].views,n.commentsNum=t.commentsNum,n.freedownurl=t.freedownurl[0].str_value,n.downurl=t.downurl[0].str_value,n.description=t.description[0].str_value,n.tag=t.tag,n.commentsNum=t.commentsNum,n.showshare=t.showshare,console.log(n.commentsNum)}})},topMenu:function(){var n=this;o.getSystemInfo({success:function(o){n.BarHeight=o.statusBarHeight}})},radioClick:function(n){console.log(n),o.navigateTo({url:"/subPage/commen/commenlist?name="+n})},getComments:function(){var n=this;o.request({url:s.default.GetPostsCommentbyCID(n.cid),success:function(o){var t=o.data.data;"undefined"!=typeof t&&"none"!=t&&"NULL"!=t?(n.showlist=!0,n.comments=o.data.data,console.log(n.comments)):n.showlist=!1}})},downs:function(){var n=this,t=o.getStorageSync("Token");null!==t&&""!==t?o.request({url:"http://易如意后台域名/api.php?act=get_info&app=10000&token="+t,method:"GET",data:{},success:function(t){if("999999999"==t.data.msg.vip){var e=n.downurl;-1!=e.indexOf("lanzou")?o.request({url:"http://114.115.164.207/lanzou.php?url="+n.downurl,method:"GET",data:{},success:function(o){n.downUrls=o.data.download,n.show=!0}}):(n.downUrls=n.downurl,console.log(n.downUrls),n.show=!0)}else{var s=new Date,u=new Date(1e3*t.data.msg.vip),l=u-s;if(l>0){e=n.downurl;-1!=e.indexOf("lanzou")?o.request({url:"http://114.115.164.207/lanzou.php?url="+n.downurl,method:"GET",data:{},success:function(o){n.downUrls=o.data.download,n.show=!0}}):-1!=e.indexOf(".apk")?(n.downUrls=n.downurl,n.show=!0):o.showToast({title:"不支持此链接下载方式！！"})}}},fail:function(){},complete:function(){}}):o.showModal({title:"未登录账号",content:"您没有登录账号，暂时不能使用软件功能，是否去登陆？",success:function(n){n.confirm?(console.log("用户点击确定"),o.navigateTo({url:"../my/account/login"})):n.cancel&&console.log("用户点击取消")}})},nodown:function(){o.showToast({title:"暂无此资源",icon:"none"})},showInp:function(){this.showCmt=!this.showCmt},closes:function(){this.showCmt=!this.showCmt},addComment:function(){var n=this,t=n.qqnumber,e=(n.yonghuming,n.commentText);""==t?o.showToast({icon:"none",title:"请填写QQ"}):o.request({url:"https://api.linhun.vip/api/NicknameAvatar?qq="+t,success:function(t){n.nameimg=t.data.imgurl,n.yonghuming=t.data.name,console.log(n.nameimg),""==e?o.showToast({icon:"none",title:"总得写些什么吧"}):o.request({url:s.default.Postcomment(n.cid,n.yonghuming,e,n.nameimg),success:function(t){console.log(t.data),n.getComments(n.cid),n.commentText="",o.showToast({title:"评论需要审核才可以显示",icon:"none"})}})}})},fabulous:function(){plus.runtime.openURL(this.freedownurl)},formatDate:function(o){o=new Date(parseInt(1e3*o));var n=o.getFullYear(),t=("0"+(o.getMonth()+1)).slice(-2),e=("0"+o.getDate()).slice(-2),s=(("0"+o.getHours()).slice(-2),("0"+o.getMinutes()).slice(-2),n+"-"+t+"-"+e);return s},close:function(){console.log("关闭弹窗"),this.show=!1},updateSucc:function(){console.log("监听安装成功")},updateErro:function(){console.log("监听安装失败")},downOver:function(){console.log("监听文件下载成功")},maskClick:function(){console.log("遮罩层呗点击"),this.show=!1}}};n.default=u}).call(this,t("df3c")["default"])},"2b49":function(o,n,t){},5950:function(o,n,t){"use strict";t.d(n,"b",(function(){return s})),t.d(n,"c",(function(){return u})),t.d(n,"a",(function(){return e}));var e={uNavbar:function(){return t.e("uni_modules/uview-ui/components/u-navbar/u-navbar").then(t.bind(null,"2010"))},uCellGroup:function(){return t.e("uni_modules/uview-ui/components/u-cell-group/u-cell-group").then(t.bind(null,"d5e0"))},uTag:function(){return t.e("uni_modules/uview-ui/components/u-tag/u-tag").then(t.bind(null,"5d99"))},uEmpty:function(){return t.e("uni_modules/uview-ui/components/u-empty/u-empty").then(t.bind(null,"c271"))},uIcon:function(){return t.e("uni_modules/uview-ui/components/u-icon/u-icon").then(t.bind(null,"ff9e"))},uNoNetwork:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-no-network/u-no-network")]).then(t.bind(null,"3472"))}},s=function(){var o=this,n=o.$createElement,t=(o._self._c,o.showlist?o.__map(o.comments,(function(n,t){var e=o.__get_orig(n),s=o.formatDate(n.created);return{$orig:e,m0:s}})):null);o.$mp.data=Object.assign({},{$root:{l0:t}})},u=[]},a791:function(o,n,t){"use strict";(function(o,n){var e=t("47a9");t("7882");e(t("3240"));var s=e(t("c812"));o.__webpack_require_UNI_MP_PLUGIN__=t,n(s.default)}).call(this,t("3223")["default"],t("df3c")["createPage"])},c812:function(o,n,t){"use strict";t.r(n);var e=t("5950"),s=t("d02c");for(var u in s)["default"].indexOf(u)<0&&function(o){t.d(n,o,(function(){return s[o]}))}(u);t("db1a");var l=t("828b"),i=Object(l["a"])(s["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],void 0);n["default"]=i.exports},d02c:function(o,n,t){"use strict";t.r(n);var e=t("1f0c"),s=t.n(e);for(var u in e)["default"].indexOf(u)<0&&function(o){t.d(n,o,(function(){return e[o]}))}(u);n["default"]=s.a},db1a:function(o,n,t){"use strict";var e=t("2b49"),s=t.n(e);s.a}},[["a791","common/runtime","common/vendor"]]]);