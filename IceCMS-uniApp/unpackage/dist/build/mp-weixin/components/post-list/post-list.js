(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/post-list/post-list"],{"2b08":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={name:"post-list",props:{list:Array,loadStatus:String,handle:{default:!1,type:Boolean},showTopic:{default:!0,type:Boolean},uid:Number,admin:{default:!1,type:Boolean}},data:function(){return{showAction:!1,indexPostAd:this.$c.indexPostAd,actionList:[{text:"关注TA",key:"follow"},{text:"删除",color:"red",key:"delete"}],choosePost:"",chooseIndex:"",sessionUid:"",showShare:!1}},watch:{uid:function(t){this.sessionUid==t&&this.actionList.unshift({text:"置顶",key:"top"})}},computed:{userInfo:function(){return t.getStorageSync("userInfo")},timestamp:function(){return Date.parse(new Date)/1e3}},created:function(){var e=t.getStorageSync("userInfo");e&&(this.sessionUid=e.uid)},methods:{toMy:function(){t.switchTab({url:"/pages/my/my"})},showShares:function(t){this.showShare=!0,this.postDetail=this.list[t]},appShares:function(){var e=e=this.postDetail.media[0],o=this,n=getCurrentPages();n[n.length-1].$page.fullPath;t.share({provider:"qq",type:0,href:"http://xy.tujingzg.com/api/post/detail?id="+o.postId,summary:o.postDetail.content,title:o.postDetail.content,imageUrl:e,success:function(e){t.showToast({title:"分享成功",icon:"none",duration:2e3}),o.posters=!1},fail:function(e){t.showToast({title:"分享失败",icon:"none",duration:2e3}),o.posters=!1}})},appShare:function(e){var o=o=this.postDetail.media[0],n=this,i=getCurrentPages();i[i.length-1].$page.fullPath;t.share({provider:"weixin",scene:e,type:0,href:"http://xy.tujingzg.com/api/post/detail?id="+n.postId,summary:n.postDetail.content,title:n.postDetail.content,imageUrl:o,success:function(e){t.showToast({title:"分享成功",icon:"none",duration:2e3}),n.posters=!1},fail:function(e){t.showToast({title:"分享失败",icon:"none",duration:2e3}),n.posters=!1}})},onActive:function(t,e){this.showAction=!0,this.choosePost=t,this.chooseIndex=e},actionCon:function(t){var e=this.actionList[t].key;"follow"==e&&this.follow(),"delete"==e&&this.postDel(),"top"==e&&this.postTop()},cancelCollection:function(t,e){var o=this;this.$H.post("post/cancelCollection",{id:t}).then((function(t){200===t.code&&(o.list[e].is_collection=!1,o.list[e].collection_count--)}))},addCollection:function(t,e){var o=this;this.$store.state.userInfo.uid||this.toMy(),this.$H.post("post/addCollection",{id:t,uid:this.list[e].uid}).then((function(t){200===t.code&&(o.list[e].is_collection=!0,o.list[e].collection_count++)}))},postTop:function(){var t=this;this.$H.post("post/setTop",{post_id:this.choosePost.id,topic_id:this.choosePost.topic_id}).then((function(e){200==e.code&&t.$q.toast("成功设为置顶","success")}))},postDel:function(){var t=this;this.$H.post("post/del",{id:this.choosePost.id}).then((function(e){200==e.code&&t.list.splice(t.chooseIndex,1)}))},follow:function(){var t=this;this.$H.post("user/addFollow",{id:this.choosePost.uid}).then((function(e){t.$u.toast(e.msg)}))},previewImage:function(e,o,n,i){var s=this;this.$H.post("post/checkint",{post_id:i}).then((function(u){200==u.code?(s.$u.toast(""),t.previewImage({current:e,urls:o})):(s.$u.toast(""),0==n?t.previewImage({current:e,urls:o}):(s.$u.toast(""),t.showModal({title:"下载将消耗一次下载次数,确认后长按保存图片即可",content:"原创作者拍摄不易，未经原创作者授权，禁止任何商业用途",success:function(u){u.confirm?s.$H.post("post/numdownimg",{post_id:i}).then((function(u){console.log(u),200===u.code?t.previewImage({current:e,urls:o}):t.showModal({title:"你的下载次数不足",content:"此内容需打赏["+n+"]音叶",success:function(n){n.confirm?s.$H.post("post/jfdownimg",{post_id:i}).then((function(n){200===n.code?t.previewImage({current:e,urls:o}):(s.$u.toast("音叶不足，请充值音叶或成为会员"),s.jumpVip())})):n.cancel&&console.log("用户点击取消")}})})):u.cancel&&console.log("用户点击取消")}})))}))},jumpTopic:function(e){t.navigateTo({url:"/pages/topic/detail?id="+e})},jump:function(e){var o;1!=e.type&&4!=e.type||(o="/pages/post/detail?id="+e.id),2==e.type&&(o="/pages/post/video-detail?id="+e.id),t.navigateTo({url:o})},toDiscuss:function(e){t.navigateTo({url:"/pages/discuss/detail?id="+e.currentTarget.dataset.id})},jumpVip:function(){t.navigateTo({url:"/pages/my/vip"})},toUcenter:function(e){t.navigateTo({url:"/pages/user/home?uid="+e})}}};e.default=o}).call(this,o("df3c")["default"])},"56cf":function(t,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return s})),o.d(e,"a",(function(){return n}));var n={uAvatar:function(){return o.e("uni_modules/uview-ui/components/u-avatar/u-avatar").then(o.bind(null,"365c"))},uIcon:function(){return o.e("uni_modules/uview-ui/components/u-icon/u-icon").then(o.bind(null,"ff9e"))},uActionSheet:function(){return o.e("uni_modules/uview-ui/components/u-action-sheet/u-action-sheet").then(o.bind(null,"1f62"))},uEmpty:function(){return o.e("uni_modules/uview-ui/components/u-empty/u-empty").then(o.bind(null,"c271"))},uLoadmore:function(){return o.e("uni_modules/uview-ui/components/u-loadmore/u-loadmore").then(o.bind(null,"3983"))},uPopup:function(){return o.e("uni_modules/uview-ui/components/u-popup/u-popup").then(o.bind(null,"d940"))}},i=function(){var t=this,e=t.$createElement,o=(t._self._c,t.__map(t.list,(function(e,o){var n=t.__get_orig(e),i=e.userInfo.vip_expire_time>t.timestamp?e.userInfo.username.substring(0,12):null,s=e.userInfo.vip_expire_time>t.timestamp?null:e.userInfo.username.substring(0,12),u=t._f("timeFrom")(e.create_time),c=1==e.type?e.media.length:null,a=1==e.type?e.media.length:null,l=1==e.type?e.media.length:null,r=2==e.type&&e.media.length>0,d=4===e.type?t._f("date")(e.vote_info.expire_time,"yyyy年mm月dd日hh时MM分"):null;return{$orig:n,g0:i,g1:s,f0:u,g2:c,g3:a,g4:l,g5:r,f1:d}}))),n=0===t.list.length&&"nomore"==t.loadStatus;t._isMounted||(t.e0=function(e){t.showShare=!1}),t.$mp.data=Object.assign({},{$root:{l0:o,g6:n}})},s=[]},5773:function(t,e,o){"use strict";o.r(e);var n=o("56cf"),i=o("deae");for(var s in i)["default"].indexOf(s)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(s);o("9598");var u=o("828b"),c=Object(u["a"])(i["default"],n["b"],n["c"],!1,null,"54dc7dee",null,!1,n["a"],void 0);e["default"]=c.exports},"76d2":function(t,e,o){},9598:function(t,e,o){"use strict";var n=o("76d2"),i=o.n(n);i.a},deae:function(t,e,o){"use strict";o.r(e);var n=o("2b08"),i=o.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/post-list/post-list-create-component',
    {
        'components/post-list/post-list-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('df3c')['createComponent'](__webpack_require__("5773"))
        })
    },
    [['components/post-list/post-list-create-component']]
]);
