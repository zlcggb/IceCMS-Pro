(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/numdown"],{"0f3e":function(t,e,n){"use strict";(function(t,e){var i=n("47a9");n("7882");i(n("3240"));var o=i(n("6900"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(o.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},2832:function(t,e,n){"use strict";n.r(e);var i=n("f0ed"),o=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=o.a},"2afa":function(t,e,n){"use strict";var i=n("5ed1"),o=n.n(i);o.a},"5ed1":function(t,e,n){},6900:function(t,e,n){"use strict";n.r(e);var i=n("e266"),o=n("2832");for(var s in o)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(s);n("ded5"),n("2afa");var u=n("828b"),c=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,"29f9d934",null,!1,i["a"],void 0);e["default"]=c.exports},"7ade":function(t,e,n){},ded5:function(t,e,n){"use strict";var i=n("7ade"),o=n.n(i);o.a},e266:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i}));var i={uTabs:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-tabs/u-tabs")]).then(n.bind(null,"0fb7"))},uAvatar:function(){return n.e("uni_modules/uview-ui/components/u-avatar/u-avatar").then(n.bind(null,"365c"))},uIcon:function(){return n.e("uni_modules/uview-ui/components/u-icon/u-icon").then(n.bind(null,"ff9e"))},uActionSheet:function(){return n.e("uni_modules/uview-ui/components/u-action-sheet/u-action-sheet").then(n.bind(null,"1f62"))},uPopup:function(){return n.e("uni_modules/uview-ui/components/u-popup/u-popup").then(n.bind(null,"d940"))}},o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.jifenlist.img,(function(e,n){var i=t.__get_orig(e),o=t._f("date")(e.downtime),s=e.userInfo.vip_expire_time>t.timestamp?e.userInfo.username.substring(0,12):null,u=e.userInfo.vip_expire_time>t.timestamp?null:e.userInfo.username.substring(0,12),c=t._f("timeFrom")(e.create_time),a=1==e.type?e.media.length:null,r=1==e.type?e.media.length:null,l=1==e.type?e.media.length:null;return{$orig:i,f0:o,g0:s,g1:u,f1:c,g2:a,g3:r,g4:l}}))),i=t.__map(t.jifenlist.video,(function(e,n){var i=t.__get_orig(e),o=e.userInfo.vip_expire_time>t.timestamp?e.userInfo.username.substring(0,12):null,s=e.userInfo.vip_expire_time>t.timestamp?null:e.userInfo.username.substring(0,12),u=t._f("timeFrom")(e.create_time),c=2==e.type&&e.media.length>0;return{$orig:i,g5:o,g6:s,f2:u,g7:c}}));t._isMounted||(t.e0=function(e){t.showShare=!1}),t.$mp.data=Object.assign({},{$root:{l0:n,l1:i}})},s=[]},f0ed:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{jifenlist:{},showAction:!1,indexPostAd:this.$c.indexPostAd,tabs:[{tab_name:"图文"},{tab_name:"视频"}],current:0,actionList:[{text:"关注TA",key:"follow"},{text:"删除",color:"red",key:"delete"}],choosePost:"",chooseIndex:"",sessionUid:"",showShare:!1}},watch:{uid:function(t){this.sessionUid==t&&this.actionList.unshift({text:"置顶",key:"top"})}},computed:{timestamp:function(){return Date.parse(new Date)/1e3}},created:function(){var e=t.getStorageSync("userInfo");e&&(this.sessionUid=e.uid)},onLoad:function(){this.getjifenlist()},methods:{tabChange:function(t){this.current=t},getjifenlist:function(){var t=this;this.$H.get("post/downlist").then((function(e){t.jifenlist=e.result}))},showShares:function(t){this.showShare=!0,this.postDetail=this.list[t]},appShare:function(e){var n=n=this.postDetail.media[0],i=this,o=getCurrentPages();o[o.length-1].$page.fullPath;t.share({provider:"weixin",scene:e,type:0,href:"http://xy.tujingzg.com/api/post/detail?id="+i.postId,summary:i.postDetail.content,title:i.postDetail.content,imageUrl:n,success:function(e){t.showToast({title:"分享成功",icon:"none",duration:2e3}),i.posters=!1},fail:function(e){t.showToast({title:"分享失败",icon:"none",duration:2e3}),i.posters=!1}})},onActive:function(t,e){this.showAction=!0,this.choosePost=t,this.chooseIndex=e},actionCon:function(t){var e=this.actionList[t].key;"follow"==e&&this.follow(),"delete"==e&&this.postDel(),"top"==e&&this.postTop()},cancelCollection:function(t,e){var n=this;this.$H.post("post/cancelCollection",{id:t}).then((function(t){200===t.code&&(n.list[e].is_collection=!1,n.list[e].collection_count--)}))},addCollection:function(t,e){var n=this;this.$H.post("post/addCollection",{id:t,uid:this.list[e].uid}).then((function(t){200===t.code&&(n.list[e].is_collection=!0,n.list[e].collection_count++)}))},postTop:function(){var t=this;this.$H.post("post/setTop",{post_id:this.choosePost.id,topic_id:this.choosePost.topic_id}).then((function(e){200==e.code&&t.$q.toast("成功设为置顶","success")}))},postDel:function(){var t=this;this.$H.post("post/del",{id:this.choosePost.id}).then((function(e){200==e.code&&t.list.splice(t.chooseIndex,1)}))},follow:function(){var t=this;this.$H.post("user/addFollow",{id:this.choosePost.uid}).then((function(e){t.$u.toast(e.msg)}))},previewImage:function(e,n,i,o){var s=this;this.$H.post("post/checkint",{post_id:o}).then((function(u){200==u.code||0==i?t.previewImage({current:e,urls:n}):t.showModal({title:"您将使用【"+i+"】音叶下载,【长按屏幕下载】",content:"是否需要下载,",success:function(i){i.confirm?s.$H.post("post/jfdownimg",{post_id:o}).then((function(u){console.log(u),200===u.code?t.previewImage({current:e,urls:n}):t.showModal({title:"您的音叶不足",content:"是否使用【1】次下载次数下载",success:function(u){u.confirm?s.$H.post("post/numdownimg",{post_id:o}).then((function(i){200===i.code?t.previewImage({current:e,urls:n}):s.$u.toast("下载次数不足，请充值音叶或成为会员")})):i.cancel&&console.log("用户点击取消")}})})):i.cancel&&console.log("用户点击取消")}})}))},jumpTopic:function(e){t.navigateTo({url:"/pages/topic/detail?id="+e})},jump:function(e){var n;1!=e.type&&4!=e.type||(n="/pages/post/detail?id="+e.id),2==e.type&&(n="/pages/post/video-detail?id="+e.id),t.navigateTo({url:n})},toDiscuss:function(e){t.navigateTo({url:"/pages/discuss/detail?id="+e.currentTarget.dataset.id})},toUcenter:function(e){t.navigateTo({url:"/pages/user/home?uid="+e})}}};e.default=n}).call(this,n("df3c")["default"])}},[["0f3e","common/runtime","common/vendor"]]]);