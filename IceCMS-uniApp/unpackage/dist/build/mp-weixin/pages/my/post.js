(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/post"],{2904:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i}));var i={uTabs:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-tabs/u-tabs")]).then(n.bind(null,"0fb7"))},uAvatar:function(){return n.e("uni_modules/uview-ui/components/u-avatar/u-avatar").then(n.bind(null,"365c"))},uIcon:function(){return n.e("uni_modules/uview-ui/components/u-icon/u-icon").then(n.bind(null,"ff9e"))},uEmpty:function(){return n.e("uni_modules/uview-ui/components/u-empty/u-empty").then(n.bind(null,"c271"))},uLoadmore:function(){return n.e("uni_modules/uview-ui/components/u-loadmore/u-loadmore").then(n.bind(null,"3983"))},uPopup:function(){return n.e("uni_modules/uview-ui/components/u-popup/u-popup").then(n.bind(null,"d940"))}},o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.postList,(function(e,n){var i=t.__get_orig(e),o=e.userInfo.vip_expire_time>t.timestamp?e.userInfo.username.substring(0,12):null,s=e.userInfo.vip_expire_time>t.timestamp?null:e.userInfo.username.substring(0,12),u=t._f("timeFrom")(e.create_time),a=1==e.type?e.media.length:null,r=1==e.type?e.media.length:null,l=1==e.type?e.media.length:null;return{$orig:i,g0:o,g1:s,f0:u,g2:a,g3:r,g4:l}}))),i=0===t.postList.length&&"nomore"==t.loadStatus,o=t.__map(t.postList,(function(e,n){var i=t.__get_orig(e),o=e.userInfo.vip_expire_time>t.timestamp?e.userInfo.username.substring(0,12):null,s=e.userInfo.vip_expire_time>t.timestamp?null:e.userInfo.username.substring(0,12),u=t._f("timeFrom")(e.create_time),a=2==e.type&&e.media.length>0;return{$orig:i,g6:o,g7:s,f1:u,g8:a}})),s=0===t.postList.length&&"nomore"==t.loadStatus,u=t.__map(t.postList,(function(e,n){var i=t.__get_orig(e),o=e.userInfo.vip_expire_time>t.timestamp?e.userInfo.username.substring(0,12):null,s=e.userInfo.vip_expire_time>t.timestamp?null:e.userInfo.username.substring(0,12),u=t._f("timeFrom")(e.create_time),a=4===e.type?t._f("date")(e.vote_info.expire_time,"yyyy年mm月dd日hh时MM分"):null;return{$orig:i,g10:o,g11:s,f2:u,f3:a}})),a=0===t.postList.length&&"nomore"==t.loadStatus,r=t.__map(t.postList,(function(e,n){var i=t.__get_orig(e),o=e.userInfo.vip_expire_time>t.timestamp?e.userInfo.username.substring(0,12):null,s=e.userInfo.vip_expire_time>t.timestamp?null:e.userInfo.username.substring(0,12),u=t._f("timeFrom")(e.create_time),a=1==e.type?e.media.length:null,r=1==e.type?e.media.length:null,l=1==e.type?e.media.length:null,c=2==e.type&&e.media.length>0,p=4===e.type?t._f("date")(e.vote_info.expire_time,"yyyy年mm月dd日hh时MM分"):null;return{$orig:i,g13:o,g14:s,f4:u,g15:a,g16:r,g17:l,g18:c,f5:p}})),l=0===t.postList.length&&"nomore"==t.loadStatus;t._isMounted||(t.e0=function(e){t.showShare=!1}),t.$mp.data=Object.assign({},{$root:{l0:n,g5:i,l1:o,g9:s,l2:u,g12:a,l3:r,g19:l}})},s=[]},"4ce3":function(t,e,n){"use strict";var i=n("d023"),o=n.n(i);o.a},"743b":function(t,e,n){"use strict";(function(t,e){var i=n("47a9");n("7882");i(n("3240"));var o=i(n("b4f1"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(o.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},"7f8d":function(t,e,n){"use strict";var i=n("c924"),o=n.n(i);o.a},a0f6:function(t,e,n){"use strict";n.r(e);var i=n("b9dc"),o=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=o.a},b4f1:function(t,e,n){"use strict";n.r(e);var i=n("2904"),o=n("a0f6");for(var s in o)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(s);n("4ce3"),n("7f8d");var u=n("828b"),a=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,"0954de30",null,!1,i["a"],void 0);e["default"]=a.exports},b9dc:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{showAction:!1,tabs:[{tab_name:"图文"},{tab_name:"视频"},{tab_name:"投票"},{tab_name:"隐私"}],indexPostAd:this.$c.indexPostAd,actionList:[{text:"关注TA",key:"follow"},{text:"删除",color:"red",key:"delete"}],choosePost:"",chooseIndex:"",sessionUid:"",showShare:!1,postList:[],loadStatus:"loading",page:1,current:0}},watch:{uid:function(t){this.sessionUid==t&&this.actionList.unshift({text:"置顶",key:"top"})}},computed:{userInfo:function(){return t.getStorageSync("userInfo")},timestamp:function(){return Date.parse(new Date)/1e3}},created:function(){var e=t.getStorageSync("userInfo");e&&(this.sessionUid=e.uid)},onLoad:function(){this.getPostList(1)},onReachBottom:function(){this.page++,this.getPostList(1)},methods:{tabChange:function(t){this.current=t,0===t&&(this.page=1,this.postList=[],this.getPostList(1)),1===t&&(this.page=1,this.postList=[],this.getPostList(2)),2===t&&(this.page=1,this.postList=[],this.getPostList(4)),3===t&&(this.page=1,this.postList=[],this.getPostList(3))},showShares:function(t){this.showShare=!0,this.postDetail=this.list[t]},appShare:function(e){var n=this.postDetail.media[0],i=this,o=getCurrentPages(),s=o[o.length-1].$page.fullPath;t.share({provider:"weixin",scene:e,type:0,href:"".concat(HTTP_IP_URL).concat(s,"&id=").concat(i.postId),summary:i.postDetail.content,title:i.postDetail.content,imageUrl:n,success:function(e){t.showToast({title:"分享成功",icon:"none",duration:2e3}),i.posters=!1},fail:function(e){t.showToast({title:"分享失败",icon:"none",duration:2e3}),i.posters=!1}})},cancelCollection:function(t,e){var n=this;this.$H.post("post/cancelCollection",{id:t}).then((function(t){200===t.code&&(n.list[e].is_collection=!1,n.list[e].collection_count--)}))},addCollection:function(t,e){var n=this;this.$H.post("post/addCollection",{id:t,uid:this.list[e].uid}).then((function(t){200===t.code&&(n.list[e].is_collection=!0,n.list[e].collection_count++)}))},postDel:function(e,n){var i=this;t.showModal({title:"删除提示",content:"您真的要删除吗？",success:function(t){t.confirm?i.$H.post("post/del",{id:e.id}).then((function(t){200==t.code&&(i.$u.toast("删除成功"),i.list.splice(i.list[n],1),i.getPostList())})):t.cancel&&console.log("用户点击取消")}})},previewImage:function(e,n,i,o){t.previewImage({current:e,urls:n})},jumpTopic:function(e){t.navigateTo({url:"/pages/topic/detail?id="+e})},jump:function(e){var n;1!=e.type&&4!=e.type||(n="/pages/post/edit?id="+e.id),2==e.type&&(n="/pages/post/edit?id="+e.id),t.navigateTo({url:n})},toDiscuss:function(e){t.navigateTo({url:"/pages/discuss/detail?id="+e.currentTarget.dataset.id})},toUcenter:function(e){t.navigateTo({url:"/pages/user/home?uid="+e})},getPostList:function(t){var e=this;1==t||2==t||4==t?(this.loadStatus="loading",this.$H.get("post/myPost",{page:this.page,type:t}).then((function(t){e.postList=e.postList.concat(t.result.data),t.result.current_page===t.result.last_page||0===t.result.last_page?e.loadStatus="nomore":e.loadStatus="loadmore"}))):(this.loadStatus="loading",this.$H.get("post/myPost",{page:this.page,isys:1}).then((function(t){e.postList=e.postList.concat(t.result.data),t.result.current_page===t.result.last_page||0===t.result.last_page?e.loadStatus="nomore":e.loadStatus="loadmore"})))}}};e.default=n}).call(this,n("df3c")["default"])},c924:function(t,e,n){},d023:function(t,e,n){}},[["743b","common/runtime","common/vendor"]]]);