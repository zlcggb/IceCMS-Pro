(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/post/edit"],{"78c8":function(t,i,e){},"90d7":function(t,i,e){"use strict";e.d(i,"b",(function(){return o})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){return n}));var n={uniFilePicker:function(){return Promise.all([e.e("common/vendor"),e.e("components/uni-file-picker/uni-file-picker")]).then(e.bind(null,"210d"))},uLine:function(){return e.e("uni_modules/uview-ui/components/u-line/u-line").then(e.bind(null,"7abb"))},uSwitch:function(){return e.e("uni_modules/uview-ui/components/u-switch/u-switch").then(e.bind(null,"211e"))},uIcon:function(){return e.e("uni_modules/uview-ui/components/u-icon/u-icon").then(e.bind(null,"ff9e"))},qButton:function(){return e.e("components/q-button/q-button").then(e.bind(null,"0899"))}},o=function(){var t=this.$createElement,i=(this._self._c,1==this.form.type?this.form.media.length:null),e=2==this.form.type?this.form.media.length:null;this.$mp.data=Object.assign({},{$root:{g0:i,g1:e}})},s=[]},"931c":function(t,i,e){"use strict";(function(t,i){var n=e("47a9");e("7882");n(e("3240"));var o=n(e("a43b"));t.__webpack_require_UNI_MP_PLUGIN__=e,i(o.default)}).call(this,e("3223")["default"],e("df3c")["createPage"])},a43b:function(t,i,e){"use strict";e.r(i);var n=e("90d7"),o=e("e212");for(var s in o)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return o[t]}))}(s);e("b2f5");var u=e("828b"),r=Object(u["a"])(o["default"],n["b"],n["c"],!1,null,"366b6480",null,!1,n["a"],void 0);i["default"]=r.exports},ae0c:function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e={data:function(){return{topicName:"选择圈子",disName:"选择话题",form:{title:"",type:1,topic_id:"",discuss_id:"",content:"",media:[],integral:"",longitude:0,latitude:0,isys:0,address:""},checked:!1,isTopic:!0,mediaList:[]}},onLoad:function(i){this.postId=i.id,this.getPostDetail(),this.isTopic=!1;var e=t.getStorageSync("location_info");this.form.longitude=e.longitude,this.form.latitude=e.latitude},methods:{getPostDetail:function(){var t=this;this.$H.get("post/detail",{id:this.postId}).then((function(i){if(t.form=i.result,1==t.form.isys&&(t.checked=!0),i.result.vote_id>0){i.result.vote_info.options.forEach((function(i){t.$set(i,"checked",!1)}));var e=Date.parse(new Date)/1e3;i.result.vote_info.expire_time<e&&(t.isVoteExpire=!0)}}))},onDel:function(t){console.log(t),this.form.media.splice(t,1)},select:function(t){},progress:function(t){},success:function(t){this.submit()},fail:function(t){console.log("上传失败：",t)},uploadMedia:function(){var i;this.form.content?this.form.integral<0?this.$u.toast("音叶最小为0"):(t.showLoading({mask:!0,title:"发布中"}),i=1==this.form.type?this.$refs.fileImage.filesList.length:this.$refs.fileVideo.filesList.length,i>0?1==this.form.type?this.$refs.fileImage.upload():this.$refs.fileVideo.upload():this.submit()):this.$u.toast("内容不能为空")},chooseLocation:function(){var i=this;t.chooseLocation({success:function(t){i.form.address=t.name,i.form.latitude=t.latitude,i.form.longitude=t.longitude}})},submit:function(i){var e=this;if(1==this.checked?this.form.isys=1:this.form.isys=0,t.showLoading({mask:!0,title:"发布中"}),2==this.form.type){if(this.mediaList.length>0){var n=this.form.media;this.mediaList.forEach((function(t,i){n.push(t.url)})),this.form.media=n}}else{var o=this.form.media;this.mediaList.forEach((function(t,i){o.push(t.url)})),this.form.media=o}this.$H.post("post/editPost",this.form).then((function(i){var n;(console.log(i),200==i.code)&&(n=1==e.form.type?"/pages/post/detail?id=":"/pages/post/video-detail?id=",t.redirectTo({url:n+e.form.id}));t.hideLoading()}))}}};i.default=e}).call(this,e("df3c")["default"])},b2f5:function(t,i,e){"use strict";var n=e("78c8"),o=e.n(n);o.a},e212:function(t,i,e){"use strict";e.r(i);var n=e("ae0c"),o=e.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(s);i["default"]=o.a}},[["931c","common/runtime","common/vendor"]]]);