(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/post/add"],{"231e":function(t,i,e){"use strict";e.r(i);var n=e("76c2"),o=e.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(s);i["default"]=o.a},"3e41":function(t,i,e){"use strict";var n=e("7476"),o=e.n(n);o.a},7476:function(t,i,e){},"76c2":function(t,i,e){"use strict";(function(t){var n=e("47a9");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=n(e("c8ae")),s={data:function(){return{SortName:"选择圈子",disName:"选择话题",form:{title:"",author:"",type:1,topic_id:"",discuss_id:"",content:"",media:[],integral:"",longitude:0,latitude:0,isys:0,address:""},checked:!1,isTopic:!0,mediaList:[]}},onLoad:function(i){this.form.type=i.type,i.is_topic&&(this.isTopic=i.is_topic),i.topic_id&&(this.form.topic_id=i.topic_id,this.disName=i.dis_name,this.isTopic=!1),i.discuss_id&&(this.form.discuss_id=i.discuss_id);var e=t.getStorageSync("location_info");this.form.longitude=e.longitude,this.form.latitude=e.latitude},methods:{select:function(t){},progress:function(t){},success:function(t){this.submit()},fail:function(t){console.log("上传失败：",t)},uploadMedia:function(){var i;this.form.content?this.form.integral<0?this.$u.toast("音叶最小为0"):(t.showLoading({mask:!0,title:"发布中"}),i=1==this.form.type?this.$refs.fileImage.filesList.length:this.$refs.fileVideo.filesList.length,i>0?1==this.form.type?this.$refs.fileImage.upload():this.$refs.fileVideo.upload():this.submit()):this.$u.toast("内容不能为空")},chooseLocation:function(){var i=this;t.chooseLocation({success:function(t){i.form.address=t.name,i.form.latitude=t.latitude,i.form.longitude=t.longitude}})},submit:function(i){1==this.checked?this.form.isys=1:this.form.isys=0,t.showLoading({mask:!0,title:"发布中"});var e=[];this.mediaList.forEach((function(t,i){e.push(t.url)})),this.form.media=e,(this.SortName="选择圈子")?this.SortName="circle":this.SortName=this.SortName,this.form.author=this.$store.state.userInfo.userid,console.log(this.form),t.request({url:o.default.CreateSquare(this.SortName),data:this.form,method:"POST",success:function(i){(i.statusCode=200)&&(console.log(i),t.redirectTo({url:"/pages/post/circle-detail?id="+i.data}))}})}}};i.default=s}).call(this,e("df3c")["default"])},7905:function(t,i,e){"use strict";(function(t,i){var n=e("47a9");e("7882");n(e("3240"));var o=n(e("f487"));t.__webpack_require_UNI_MP_PLUGIN__=e,i(o.default)}).call(this,e("3223")["default"],e("df3c")["createPage"])},"84b9":function(t,i,e){"use strict";e.d(i,"b",(function(){return o})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){return n}));var n={uNavbar:function(){return e.e("uni_modules/uview-ui/components/u-navbar/u-navbar").then(e.bind(null,"2010"))},uniFilePicker:function(){return Promise.all([e.e("common/vendor"),e.e("components/uni-file-picker/uni-file-picker")]).then(e.bind(null,"210d"))},uLine:function(){return e.e("uni_modules/uview-ui/components/u-line/u-line").then(e.bind(null,"7abb"))},uSwitch:function(){return e.e("uni_modules/uview-ui/components/u-switch/u-switch").then(e.bind(null,"211e"))},uIcon:function(){return e.e("uni_modules/uview-ui/components/u-icon/u-icon").then(e.bind(null,"ff9e"))},qButton:function(){return e.e("components/q-button/q-button").then(e.bind(null,"0899"))}},o=function(){var t=this.$createElement;this._self._c},s=[]},f487:function(t,i,e){"use strict";e.r(i);var n=e("84b9"),o=e("231e");for(var s in o)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return o[t]}))}(s);e("3e41");var u=e("828b"),r=Object(u["a"])(o["default"],n["b"],n["c"],!1,null,"8ab029d2",null,!1,n["a"],void 0);i["default"]=r.exports}},[["7905","common/runtime","common/vendor"]]]);